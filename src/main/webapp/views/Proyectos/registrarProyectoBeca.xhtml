<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:composition template="/WEB-INF/templates/layout.xhtml">

        <ui:define name="content">
            <h:form id="formAdmin">
                <center> 
                    <p:panel style="width: 80%">  
                        <p:accordionPanel multiple="true" activeIndex="0,1,2,3" id="acordion">
                            
                            <p:tab title="Datos del Becario">
                                <p:panelGrid columns="4">
                                    <p:column>
                                        <p:outputLabel value="Dui:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputMask id="duibecario" mask="99999999-9" value="#{proyectosMB.numDocumentoBecario}" />
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Correo Electronico:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="correobecario" value="#{proyectosMB.personaBecario.emailPersona}"/>
                                        <p:commandButton actionListener="#{proyectosMB.searchByDocEmailBecario()}" id="idBtnSearchInBecario" process="@this,duibecario,correobecario" update="nombrebecario,apellidobecario,unidadbecario,telefonobecario" icon="ui-icon-search" title="Buscar Persona"/>                                       
                                    </p:column> 
                                    <p:column>
                                        <p:outputLabel value="Nombre:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="nombrebecario" value="#{proyectosMB.personaBecario.nombrePersona}"/>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Apellido:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="apellidobecario" value="#{proyectosMB.personaBecario.apellidoPersona}"/>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Facultad:"/>
                                        </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="facultadbecario" value="#{proyectosMB.facultadSelectedBecario.idFacultad}"  style="width:180px" >
                                            <f:selectItem itemLabel="--Seleccione--" itemValue="" noSelectionOption="true"/>
                                            <p:ajax listener="#{proyectosMB.onFacultadBecarioChange()}" update="unidadbecario" />
                                            <c:forEach var="fac" items="#{proyectosMB.facultadList}">
                                                <f:selectItem itemLabel="#{fac.nombreFacultad}" itemValue="#{fac.idFacultad}"/>
                                            </c:forEach>
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Unidad:"/>
                                        </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="unidadbecario" value="#{proyectosMB.unidadSelectedBecario.idUnidad}"  style="width:180px" >
                                            <f:selectItem itemLabel="--Seleccione--" itemValue="" noSelectionOption="true"/>
                                            <c:forEach var="uni" items="#{proyectosMB.unidadBecarioList}">
                                                <f:selectItem itemLabel="#{uni.nombre}" itemValue="#{uni.idUnidad}"/>
                                            </c:forEach>
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Telefono:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="telefonobecario" value="#{proyectosMB.telefonoBecarioFijo.numeroTelefono}" />
                                    </p:column>
                                </p:panelGrid>
                            </p:tab>
                            <p:tab title="Datos del Proyecto">
                                <h:panelGrid columns="4" styleClass="col-lg-12">
                                    <p:column>
                                        <p:outputLabel value="Pais destino"/>
                                        </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="paisdestino" value="#{proyectosMB.paisSelected.idPais}"  style="width:180px">
                                            <f:selectItem itemLabel="--Seleccione--" itemValue="" />
                                            <c:forEach var="pais" items="#{proyectosMB.paisList}">
                                                <f:selectItem itemLabel="#{pais.nombrePais}" itemValue="#{pais.idPais}"/>
                                            </c:forEach>
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Tipo Modalidad"/>
                                        </p:column>
                                    <p:column>
                                        <p:selectOneMenu  id="modalidadbeca" value="#{proyectosMB.tipoModalidadSelected.idTipoModalidad}"  style="width:180px">
                                            <f:selectItem itemLabel="--Seleccione--" itemValue="" noSelectionOption="true"/>
                                            <c:forEach var="modalidad" items="#{proyectosMB.tipoModalidadList}">
                                                <f:selectItem itemLabel="#{modalidad.modalidad}" itemValue="#{modalidad.idTipoModalidad}"/>
                                            </c:forEach>
                                            <p:ajax event="change" listener="#{proyectosMB.mostrarCampo()}" update="monto" process="@this" partialSubmit="true"/>
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:outputPanel id="monto">
                                        <p:column rendered="#{proyectosMB.mostrarmonto==true}">
                                            <p:outputLabel  value="Monto del becario"/>
                                            </p:column>
                                        <p:column>
                                            <p:inputText value="#{proyectosMB.beca.montoBecario}" />
                                        </p:column>
                                    </p:outputPanel>
                                    <p:column>
                                        <p:outputLabel value="Carrera"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText value="#{proyectosMB.beca.carrera}"/>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Otorgada?"/>
                                        </p:column>
                                    <p:column>
                                        <p:selectOneMenu value="#{proyectosMB.beca.otorgado}">
                                            <f:selectItem itemLabel="--Seleccione--" itemValue="" noSelectionOption="true"/>
                                            <f:selectItem itemValue="true" itemLabel="SI" />
                                            <f:selectItem itemValue="false" itemLabel="NO" />                   
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel  value="A&ntilde;o de Gesti&oacute;n: " />
                                        </p:column>
                                        <p:column>
                                        <p:selectOneMenu id="aniogestionbeca" value="#{proyectosMB.anio}" style="width:180px">
                                            <c:forEach begin="0" end="125" varStatus="loop">
                                                <c:set var="currentYear" value="${proyectosMB.yearActual-loop.index} " />
                                                <f:selectItem itemValue="#{currentYear}" itemLabel="#{currentYear}"/>
                                            </c:forEach>
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column >
                                        <h:outputLabel value="Nombre del Proyecto:" />
                                        </p:column>
                                    <p:column >
                                        <p:inputTextarea value="#{proyectosMB.proyecto.nombreProyecto}"  maxlength="300" style="width:180px"/>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Facultad:"/>
                                        </p:column>
                                        <p:column>
                                        <p:selectOneMenu id="facultadbeca" value="#"  style="width:180px" >
                                            <f:selectItem itemLabel="--Seleccione--" itemValue="" noSelectionOption="true"/>
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Unidad:"/>
                                    </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="unidadbeca" value="#"  style="width:180px" >
                                            <f:selectItem itemLabel="-- Seleccione --" itemValue="" noSelectionOption="true"/>
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Pais cooperante:"/>
                                        </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="paiscooperantebeca" value="#{proyectosMB.paisCooperanteSelected.idPais}"  style="width:180px">
                                            <f:selectItem itemLabel="--Seleccione--" itemValue="" />
                                            <c:forEach var="pais" items="#{proyectosMB.paisCooperanteList}">
                                                <f:selectItem itemLabel="#{pais.nombrePais}" itemValue="#{pais.idPais}"/>
                                            </c:forEach>
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Fecha Inicio:"/>
                                        </p:column>
                                    <p:column>
                                        <p:calendar pattern="dd/MM/yyyy" showOn="button" navigator="true" yearRange="c-50:c+10" value="#{proyectosMB.proyecto.fechaInicio}"/>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Fecha Fin:"/>
                                        </p:column>
                                    <p:column>
                                        <p:calendar pattern="dd/MM/yyyy" showOn="button" navigator="true" yearRange="c-50:c+10" value="#{proyectosMB.proyecto.fechaFin}"/>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Monto del Proyecto:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText value="#{proyectosMB.proyecto.montoProyecto}"/>
                                    </p:column> 
                                </h:panelGrid>
                            </p:tab>
                            <p:tab title="Datos del Coordinador">
                                <p:panelGrid columns="4">
                                    <p:column>
                                        <p:outputLabel value="Dui:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputMask id="duicoordinadorbecario" mask="99999999-9" value="#{proyectosMB.numDocumentoSol}" />
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Correo Electronico:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="correocoordinadorbecario" value="#{proyectosMB.persona.emailPersona}"/>
                                        <p:commandButton actionListener="#{proyectosMB.searchByDocEmailInterno()}" id="idBtnSearchInSol" process="@this,duicoordinadorbecario,correocoordinadorbecario" update="nombrecoordinadorbecario,apellidocoordinadorbecario,cargocoordinadorbecario,facultadcoordinadorbecario,unidadcoordinadorbecario,telefonocoordinadorbecario,faxcoordinadorbecario" icon="ui-icon-search" title="Buscar"/>                                       
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Nombre:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="nombrecoordinadorbecario" value="#{proyectosMB.persona.nombrePersona}"/>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Apellido:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="apellidocoordinadorbecario" value="#{proyectosMB.persona.apellidoPersona}"/>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Cargo:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="cargocoordinadorbecario" value="#{proyectosMB.persona.cargoPersona}"/>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Facultad:"/>
                                        </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="facultadcoordinadorbecario" value="#{proyectosMB.facultadSelectedSol.idFacultad}"  style="width:180px" >
                                            <f:selectItem itemLabel="--Seleccione--" itemValue="" noSelectionOption="true"/>
                                            <p:ajax listener="#{proyectosMB.onFacultadSolicitanteChange()}" update="unidadcoordinadorbecario" />
                                            <c:forEach var="fac" items="#{proyectosMB.facultadList}">
                                                <f:selectItem itemLabel="#{fac.nombreFacultad}" itemValue="#{fac.idFacultad}"/>
                                            </c:forEach>
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Unidad:"/>
                                        </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="unidadcoordinadorbecario" value="#{proyectosMB.unidadSelectedSol.idUnidad}"  style="width:180px" >
                                            <f:selectItem itemLabel="--Seleccione--" itemValue="" noSelectionOption="true"/>
                                            <c:forEach var="fac" items="#{proyectosMB.unidadSolList}">
                                                <f:selectItem itemLabel="#{fac.nombre}" itemValue="#{fac.idUnidad}"/>
                                            </c:forEach>
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Telefono:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputMask id="telefonocoordinadorbecario" value="#{proyectosMB.telefonoSolFijo.numeroTelefono}" mask="(503)-9999-9999"/>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Fax:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="faxcoordinadorbecario" value="#{proyectosMB.telefonoSolFax.numeroTelefono}"/>
                                    </p:column>
                                </p:panelGrid> 
                            </p:tab>
                            <p:tab title="Datos del Coordinador Externo">
                                <p:panelGrid columns="4">
                                    <p:column>
                                        <p:outputLabel value="Pasaporte:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="pasaporteexternobecario" value="#{proyectosMB.numDocumentoRefExt}"/>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Correo Electronico:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="correoexternobecario" value="#{proyectosMB.personaExterna.emailPersona}"/>
                                        <p:commandButton actionListener="#{proyectosMB.searchByDocEmailReferenteExterno()}" id="idBtnSearchInRefExt" process="@this,pasaporteexternobecario,correoexternobecario" update="nombreexternobecario,apellidoexternobecario,cargoexternobecario,unidadexternobecario,telefonoexternobecario,faxexternobecario" icon="ui-icon-search" title="Buscar Persona"/>                                       
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Nombre:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="nombreexternobecario" value="#{proyectosMB.personaExterna.nombrePersona}"/>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Apellido:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="apellidoexternobecario" value="#{proyectosMB.personaExterna.apellidoPersona}"/>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Cargo:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="cargoexternobecario" value="#{proyectosMB.personaExterna.cargoPersona}"/>
                                    </p:column>
                                    <p:column >
                                        <p:outputLabel value="Entidad/Institucion"/>
                                        </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="unidadexternobecario" value="#{proyectosMB.organismoSelected.idOrganismo}"  style="width:180px">
                                            <f:selectItem itemLabel="--Seleccione--" itemValue="" />
                                            <c:forEach var="uni" items="#{proyectosMB.organismoList}">
                                                <f:selectItem itemLabel="#{uni.nombreOrganismo}" itemValue="#{uni.idOrganismo}"/>
                                            </c:forEach>
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Telefono:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="telefonoexternobecario" value="#{proyectosMB.telefonoRefextFijo.numeroTelefono}" />
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Fax:"/>
                                        </p:column>
                                    <p:column>
                                        <p:inputText id="faxexternobecario" value="#{proyectosMB.telefonoRefextFax.numeroTelefono}"/>
                                    </p:column>
                                </p:panelGrid>
                            </p:tab>
                        </p:accordionPanel>                                                                         
                    </p:panel>
                    <p:commandButton styleClass="boton" value="Regresar"  id="btnRegresar" title="Regresar" actionListener="#{proyectosMB.regresar()}"/>
                    <p:commandButton styleClass="boton" actionListener="#{proyectosMB.guardarProyecto()}" process="formAdmin" update="formAdmin" value="guardar" id="btnguardarProyecto" title="Guardar Proyecto"/>
                </center>
            </h:form>
        </ui:define>
    </ui:composition>
</html>
