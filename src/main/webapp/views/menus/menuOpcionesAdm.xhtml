<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition  template="/WEB-INF/templates/layout.xhtml"
                 xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:f="http://java.sun.com/jsf/core"
                 xmlns:h="http://java.sun.com/jsf/html"
                 xmlns:ui="http://java.sun.com/jsf/facelets"
                 xmlns:p="http://primefaces.org/ui"
                 xmlns:pe="http://primefaces.org/ui/extensions" 
                 xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">


    <ui:define name="content">
        
        <h:form id="formMenu">

            <table border="1" id="tablaP">
                <thead>
                    <tr>
                        <th class="ui-state-default ui-sortable-column ui-filter-column ui-state-active" role="columnheader">Menu</th>
                        <th>Opciones</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>                    
                    <c:forEach  items="#{menusOpcionesMB.listadoMenus}" var="opcion"> 
                        <tr>
                            <td>  #{opcion.nombreMenu}</td>
                            <td>
                                <c:forEach items="#{opcion.ssOpcionesList}" var="lts"> 
                                    <h:outputText value="#{lts.nombreOpcion}" /><br/> 
                                </c:forEach><br/><br/>
                            </td>
                            <td>
                                <div style="float: left">
                                    <p:commandLink styleClass="ui-icon ui-icon-pencil" title="Editar"
                                                   value="Editar" actionListener="#{menusOpcionesMB.llenarOpciones(opcion)}"
                                                   oncomplete="PF('NuevoMenuDialog').show();"
                                                   update=":NuevoMenuDlg, formMenu"/>
                                </div>
                                <div style="float: left">
                                    <p:commandLink styleClass="ui-icon ui-icon-closethick"
                                                   title="Eliminar" value="Eliminar"
                                                   />
                                </div>
                            </td>
                        </tr>
                    </c:forEach>                      
                </tbody>
            </table>

        </h:form>

        <p:dialog id="NuevoMenuDlg" widgetVar="NuevoMenuDialog"  resizable="false"  modal="true" appendTo="@(body)" header="Menu-Opcion" closeOnEscape="true">

            <h:form id="formNuevoMenu">
                <center>                  
                    <h:panelGrid columns="2" >

                        <p:column>
                            <p:outputLabel  value="Nombre Menu" />
                        </p:column>                                         
                        <p:column>                             
                            <p:outputLabel  value="#{menusOpcionesMB.ssMenus.nombreMenu}" />
                        </p:column> 


                        <p:column>  
                          
                               <h3 style="margin-top: 0">Basic PickList</h3>
                        </p:column>                                         
                        <p:column>                                         
                                <p:pickList id="pickList" value="#{menusOpcionesMB.opciones}" var="opc" 
                                            itemLabel="#{opc.nombreOpcion}" itemValue="#{opc}"  converter="#{ssOpcionesConverter}" />
                        </p:column>


                        <p:column> 
                            <p:commandButton value="Guardar" id="idGuardarMenu" actionListener="#{menusOpcionesMB.guardar()}" process="@form" update="@form" icon="ui-icon-disk" oncomplete="PF('NuevoMenuDialog').hide();" />
                            <p:commandButton value="Cerrar" id="idCerrar" process="@this" icon="ui-icon-disk" immediate="true" onclick="PF('NuevoMenuDialog').close();" />
                           
                            
                        </p:column>
                    </h:panelGrid>
                </center>    
            </h:form>  
        </p:dialog>


    </ui:define>    
</ui:composition> 