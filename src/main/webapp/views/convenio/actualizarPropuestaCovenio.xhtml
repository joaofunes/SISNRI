<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition  template="/WEB-INF/templates/layout.xhtml"
                 xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:f="http://java.sun.com/jsf/core"
                 xmlns:h="http://java.sun.com/jsf/html"
                 xmlns:ui="http://java.sun.com/jsf/facelets"
                 xmlns:p="http://primefaces.org/ui"
                 xmlns:pe="http://primefaces.org/ui/extensions" 
                 xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                 >


    <ui:define name="content">

       
        <h:form id="formAdmin">

            <center>
                <p:panel style="width: 80%">  
                    <p:accordionPanel multiple="true" activeIndex="0,1,2,3" id="acordion">
                        <p:tab title="Datos del Solicitante">


                            <h:panelGroup id="GroupSolicitante" > 
                                <p:panelGrid >                           
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idSolicinateNombreAuto" value="Buscar por Nombre Solicitante" />                                       
                                        </p:column>

                                        <p:column colspan="3">
                                            <p:autoComplete id="idSolicinateNombreAuto" value="#{propuestaConvenioMB.solicitante}" completeMethod="#{propuestaConvenioMB.completeSolicitante}" style="width:450px"
                                                            var="solicitud" itemLabel="#{solicitud.nombrePersona}" itemValue="#{solicitud}" converter="#{personaConverter}" scrollHeight="250">
                                                <p:ajax event="itemSelect" listener="#{propuestaConvenioMB.searchByNameSolicitante()}" process="@this,idSolicinateNombre" update="idFacultadUnidad,idCargo"/>
                                            </p:autoComplete> 
                                            <p:message for="idSolicinateNombreAuto" />  
                                            <p:watermark for="idSolicinateNombreAuto" value="Digite Nombre Solicitante" id="watermarkNameSol2" /> 
                                        </p:column>

                                    </p:row>  
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idSolicinateNombre" value="Nombre Solicitante" />
                                        </p:column>

                                        <p:column  >
                                            <p:inputText id="idSolicinateNombre"  required="true" label="Nombre" value="#{propuestaConvenioMB.solicitante.nombrePersona}" />
                                            <p:message for="idSolicinateNombre" />   
                                            <p:watermark for="idSolicinateNombre" value="Nombre Solicitante" id="watermarkNameSol" />                                           
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel for="idSolicinateApellido" value="Apellido Solicitante" />
                                        </p:column>

                                        <p:column >
                                            <p:inputText id="idSolicinateApellido"  required="true" label="Apellido" value="#{propuestaConvenioMB.solicitante.apellidoPersona}" />
                                            <p:message for="idSolicinateApellido" />   
                                            <p:watermark for="idSolicinateApellido" value="Apellido Solicitante"  />                                           
                                        </p:column>
                                    </p:row> 
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idTelFijoSolicitante" value="Tel:" />
                                        </p:column>
                                        <p:column>                                                               
                                            <p:inputMask id="idTelFijoSolicitante"  mask="9999-9999" value="#{propuestaConvenioMB.telFijoSolicitante.numeroTelefono}" />
                                            <p:watermark for="idTelFijoSolicitante" value="xxxx-xxxx"  /> 
                                            <p:message for="idTelFijoSolicitante" />
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel for="idCelSolicitante" value="Cel:" />
                                        </p:column>
                                        <p:column>
                                            <p:inputMask id="idCelSolicitante"  mask="9999-9999" value="#{propuestaConvenioMB.telCelularSolicitante.numeroTelefono}" />
                                            <p:watermark for="idCelSolicitante" value="xxxx-xxxx"  /> 
                                            <p:message for="idCelSolicitante" />
                                        </p:column>
                                    </p:row>
                                    

                                    <p:row>

                                        <p:column>
                                            <p:outputLabel  for="idFacultadUnidad" value="Facultad/Unidad"  />
                                        </p:column>
                                        <p:column>
                                            <p:selectOneMenu id="idFacultadUnidad" required="true" value="#{propuestaConvenioMB.facultadesUnidades}" converter="#{facultadUnidadConverter}" style="width:190px">                                   
                                                <p:ajax event="change" process="@this" update="idEscuelaDept" listener="#{propuestaConvenioMB.actualizarEscuelaDept()}"/>
                                                <f:selectItem itemLabel="--Seleccione Facultad/Unidad--" itemValue="#{null}"  itemDisabled="true" />
                                                <f:selectItems value="#{propuestaConvenioMB.listaFacultadUnidad}" var="escDpt" itemLabel="#{escDpt.label}" itemValue="#{escDpt}" />                                                                                       
                                            </p:selectOneMenu>
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel   value="Escuela/Departamento" />
                                        </p:column>
                                        <p:column>
                                            <p:selectOneMenu  id="idEscuelaDept" disabled="#{propuestaConvenioMB.flagEscuelaDept}" required="true" value="#{propuestaConvenioMB.escuelaDepartamento}" converter="#{escuelaDepartamentoConverter}" style="width:160px" >                                              
                                                <f:selectItem itemValue="#{null}" itemLabel="Seleccione Escuela/Departamento" itemDisabled="true" />                                            
                                                <f:selectItems value="#{propuestaConvenioMB.listadoEscuelaDepartamento}" var="escDpt" itemLabel="#{escDpt.nombreEscuelaDepto}" itemValue="#{escDpt}" />                                        
                                            </p:selectOneMenu>
                                        </p:column>

                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idCargo" value="Cargo Solicitante" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="idCargo"  required="true" label="cargo" value="#{propuestaConvenioMB.solicitante.cargoPersona}"/>
                                            <p:message for="idCargo" />
                                            <p:watermark for="idCargo" value="Cargo" id="watermarkCargo" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <h:outputLabel value="Agregar Solicitante Interno" />
                                        </p:column>
                                        <p:column>
                                            <p:selectBooleanButton id="btnInterno" value="#{propuestaConvenioMB.tabAsisMostrar}" onLabel="Si" offLabel="No" onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px">
                                                <p:ajax update="GroupSolicitanteInterno,grup1" listener="#{propuestaConvenioMB.mostrarTab()}" />
                                            </p:selectBooleanButton>
                                        </p:column>
                                        <p:column>
                                            <h:outputLabel value="Agregar Solicitante Externo" />
                                        </p:column>
                                        <p:column>
                                            <p:selectBooleanButton id="btnExterno" value="#{propuestaConvenioMB.tabAsisMostrarExterno}" onLabel="Si" offLabel="No" onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px">
                                                <p:ajax update="GroupSolicitanteExterno,grup2" listener="#{propuestaConvenioMB.mostrarTabExterno()}" />
                                            </p:selectBooleanButton>
                                        </p:column>
                                    </p:row>

                                </p:panelGrid>     
                            </h:panelGroup>
                        </p:tab>
                        <p:tab title="Datos Solicitante Interno">
                            
                            <h:panelGroup id="grup1" > 
                                <p:panelGrid id="grid" rendered="#{propuestaConvenioMB.tabAsis}" >     
                                    <p:column>
                                        <p:outputLabel for="tipoBusquedaInt" value="Tipo de Busqueda:" />
                                    </p:column>
                                    <p:column>                                        
                                        <p:selectOneMenu id="tipoBusquedaInt" value="#{propuestaConvenioMB.tipoBusquedaInterna}"  style="width:125px">  
                                            <p:ajax  listener="#{propuestaConvenioMB.habilitarAutoInterno}" update="grup1"  process="tipoBusquedaInt" />
                                            <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true" />                                                                           
                                            <f:selectItem itemLabel="Nombres" itemValue="nombre" />                                                                           
                                            <f:selectItem itemLabel="E-mail" itemValue="email" />
                                            <f:selectItem itemLabel="Documento" itemValue="doc" />  
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel  value="Busqueda" />     
                                    </p:column>
                                    <p:column> 
                                        <p:autoComplete id="searchDui" minQueryLength="9" size="9" rendered="#{propuestaConvenioMB.flagSearchDuiInterno}"  value="#{propuestaConvenioMB.referenteInterno}" completeMethod="#{propuestaConvenioMB.completeBusquedaDui}"
                                                        var="name" itemLabel="#{name.duiPersona}" itemValue="#{name}" converter="#{personaConverter}"
                                                        forceSelection="true">                                            
                                            <p:column>
                                                <h:outputText value="#{name.duiPersona}" />
                                            </p:column>
                                        </p:autoComplete>
                                        <p:watermark for="searchDui" value="DUI"/>  
                                        <p:autoComplete id="idNombreInterno" value="#{propuestaConvenioMB.referenteInterno}" rendered="#{propuestaConvenioMB.flagSearchNombreInterno}"
                                                        completeMethod="#{propuestaConvenioMB.methodSearch}" disabled="#{propuestaConvenioMB.disableAutoInterno}"
                                                        var="theme" itemLabel="#{theme.nombrePersona}" itemValue="#{theme}" converter="#{personaConverter}" 
                                                        forceSelection="true">                                           
                                            <p:column>
                                                <h:outputText value="#{theme.nombrePersona}" />
                                            </p:column>
                                            <p:ajax event="itemSelect" listener="#{propuestaConvenioMB.cargarNombreSoliInterno()}" process="@this" update="GroupSolicitanteInterno"/>
                                        </p:autoComplete>
                                        <p:watermark for="idNombreInterno" value="Nombre"/> 
                                        <p:autoComplete id="idEmailInterno" value="#{propuestaConvenioMB.referenteInterno}" rendered="#{propuestaConvenioMB.flagSearchEmailInterno}"
                                                        completeMethod="#{propuestaConvenioMB.methodSearch}" disabled="#{propuestaConvenioMB.disableAutoInterno}"
                                                        var="theme" itemLabel="#{theme.emailPersona}" itemValue="#{theme}" converter="#{personaConverter}" 
                                                        forceSelection="true">                                           
                                            <p:column>
                                                <h:outputText value="#{theme.emailPersona}" />
                                            </p:column>
                                            <p:ajax event="itemSelect" listener="#{propuestaConvenioMB.cargarNombreSoliInterno()}" process="@this" update="GroupSolicitanteInterno"/>
                                        </p:autoComplete>
                                        <p:watermark for="idEmailInterno" value="E-mail"/> 
                                    </p:column>
                                </p:panelGrid >   
                            </h:panelGroup> 
                            <h:panelGroup id="GroupSolicitanteInterno" >  

                                <p:panelGrid rendered="#{propuestaConvenioMB.tabAsis}">     
                                    <p:growl id="msg" />
                                    <p:row>                                        
                                        <p:column>
                                            <h:outputLabel value="Mismo Solicitante:" />
                                        </p:column>
                                        <p:column>                                                                                  
                                            <p:selectBooleanButton id="btnMismoInterno" value="#{propuestaConvenioMB.mismoSolicitante}" onLabel="Si" offLabel="No" onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px">
                                                <p:ajax update="GroupSolicitanteInterno" process="@this" listener="#{propuestaConvenioMB.mismoSolicitantes()}" />
                                            </p:selectBooleanButton>                                    
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idSolicinateNombreInterno" value="Nombre Solicitante" />
                                        </p:column>
                                        <p:column>                                            
                                            <p:inputText id="idSolicinateNombreInterno" required="true"  label="Nombre" value="#{propuestaConvenioMB.referenteInterno.nombrePersona}" />                                
                                            <p:watermark for="idSolicinateNombreInterno" value="Nombre Solicitante"/>                                           
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel for="idSolicinateApellidoInterno" value="Apellido Solicitante" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="idSolicinateApellidoInterno" required="true"  label="Apellido" value="#{propuestaConvenioMB.referenteInterno.apellidoPersona}" />
                                            <p:message for="idSolicinateApellidoInterno" />   
                                            <p:watermark for="idSolicinateApellidoInterno" value="Apellido Solicitante"/>                                           
                                        </p:column>
                                    </p:row>                            
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idDui" value="N&deg; DUI" />     
                                        </p:column>
                                        <p:column>
                                            <p:inputMask id="idDui"   value="#{propuestaConvenioMB.referenteInterno.duiPersona}" mask="99999999-9"/>                                           
                                            <p:watermark for="idDui" value="999999999-9" />
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel for="email" value="Correo Electr&oacute;nico" />     
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="email" required="true" value="#{propuestaConvenioMB.referenteInterno.emailPersona}">
                                                <f:validator validatorId="com.sisrni.validator.emailValidator" />
                                            </p:inputText>
                                            <p:message for="email" display="tooltip" />  
                                            <p:watermark for="email" value="correo@email.com"/>
                                        </p:column>

                                    </p:row>   
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idTelFijoInterno" value="Tel:" />
                                        </p:column>
                                        <p:column>                                                               
                                            <p:inputMask id="idTelFijoInterno" required="true" mask="9999-9999" value="#{propuestaConvenioMB.telFijoInterno.numeroTelefono}" />
                                            <p:watermark for="idTelFijoInterno" value="xxxx-xxxx"  /> 
                                            <p:message for="idTelFijoInterno" />
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel for="idCelInterno" value="Cel:" />
                                        </p:column>
                                        <p:column>
                                            <p:inputMask id="idCelInterno" required="true"  mask="9999-9999" value="#{propuestaConvenioMB.telCelularInterno.numeroTelefono}" />
                                            <p:watermark for="idCelInterno" value="xxxx-xxxx"  /> 
                                            <p:message for="idCelInterno" />
                                        </p:column>
                                    </p:row>
                                    <p:row>                           
                                        <p:column>
                                            <p:outputLabel  for="idFacultadUnidadInterno" value="Facultad/Unidad"  />
                                        </p:column>
                                        <p:column>
                                            <p:selectOneMenu  id="idFacultadUnidadInterno" required="true" value="#{propuestaConvenioMB.facultadesUnidadesInterno}" converter="#{facultadUnidadConverter}" style="width:160px" editable="#{propuestaConvenioMB.mismoSol}" >                                              
                                                <f:selectItem itemValue="#{null}" itemLabel="Seleccione Facultad/Unidad" noSelectionOption="true" />                                            
                                                <f:selectItems  value="#{propuestaConvenioMB.listaFacultadUnidad}" var="pFacUni" itemLabel="#{pFacUni.label}" itemValue="#{pFacUni}" />
                                                <p:ajax event="change" listener="#{propuestaConvenioMB.actualizarEscuelaDeptInterno()}" update="idEscuelaDeptInter" process="@this" partialSubmit="true"/>
                                            </p:selectOneMenu>                                            
                                        </p:column>                        
                                        <p:column>
                                            <p:outputLabel  for="idEscuelaDeptInter" value="Escuela/Departamento" />
                                        </p:column>
                                        <p:column>
                                            <p:selectOneMenu  id="idEscuelaDeptInter" required="true"  value="#{propuestaConvenioMB.escuelaDepartamentoInterno}" converter="#{escuelaDepartamentoConverter}" disabled="#{propuestaConvenioMB.flagEscuelaDeptInterno}"  style="width:160px" editable="#{propuestaConvenioMB.mismoSol}">                                              
                                                <f:selectItem itemValue="#{null}" itemLabel="Seleccione Escuela/Departamento" noSelectionOption="true" />                                            
                                                <f:selectItems value="#{propuestaConvenioMB.listadoEscuelaDepartamentoInter}" var="escDpt" itemLabel="#{escDpt.nombreEscuelaDepto}" itemValue="#{escDpt}" />                                        
                                            </p:selectOneMenu>
                                        </p:column>
                                    </p:row>   
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idCargoInterno" value="Cargo Solicitante" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="idCargoInterno" required="true"  label="cargo"  value="#{propuestaConvenioMB.referenteInterno.cargoPersona}" />
                                            <p:watermark for="idCargoInterno" value="Cargo" id="waterCargo" />
                                            <p:message for="idCargoInterno" />
                                        </p:column>

                                    </p:row>

                                </p:panelGrid>        
                            </h:panelGroup>
                        </p:tab>
                        <p:tab title="Datos Solicitante Externo">
                            <h:panelGroup id="grup2" >                                
                                <p:panelGrid rendered="#{propuestaConvenioMB.tabAsisExterno}">     
                                    <p:column>
                                        <p:outputLabel for="tipoBusquedaExt" value="Tipo de Busqueda:" />
                                    </p:column>

                                    <p:column>                                        
                                        <p:selectOneMenu id="tipoBusquedaExt" value="#{propuestaConvenioMB.tipoBusquedaExterna}"  style="width:125px">  
                                            <p:ajax  listener="#{propuestaConvenioMB.habilitarAutoExterno}" update="grup2"  process="tipoBusquedaExt" />
                                            <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true" />                                                                           
                                            <f:selectItem itemLabel="Nombres" itemValue="nombre" />                                                                           
                                            <f:selectItem itemLabel="E-mail" itemValue="email" />
                                            <f:selectItem itemLabel="Documento" itemValue="doc" />  
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel value="Busqueda" />
                                    </p:column>
                                    <p:column>

                                        <p:autoComplete id="searchDoc" minQueryLength="8" size="8" rendered="#{propuestaConvenioMB.flagSearchDuiExterno}"  
                                                        value="#{propuestaConvenioMB.numDocumentoExterno}" completeMethod="#{propuestaConvenioMB.completeBusquedaPassaporte}"
                                                        var="name" itemLabel="#{name.duiPersona}" itemValue="#{name}" converter="#{personaConverter}"
                                                        forceSelection="true">                                            
                                            <p:column>
                                                <h:outputText value="#{name.duiPersona}" />
                                            </p:column>
                                        </p:autoComplete>
                                        <p:watermark for="searchDoc" value="Documento"/>  
                                        <p:autoComplete id="idNombreExterno" value="#{propuestaConvenioMB.referenteExterno}" rendered="#{propuestaConvenioMB.flagSearchNombreExterno}"
                                                        completeMethod="#{propuestaConvenioMB.methodSearchExterno}" disabled="#{propuestaConvenioMB.disableAutoExterno}"
                                                        var="theme" itemLabel="#{theme.nombrePersona}" itemValue="#{theme}" converter="#{personaConverter}" 
                                                        forceSelection="true">                                           
                                            <p:column>
                                                <h:outputText value="#{theme.nombrePersona}" />
                                            </p:column>
                                        </p:autoComplete>
                                        <p:watermark for="idNombreExterno" value="Nombre"/> 
                                        <p:autoComplete id="idEmailExterno" value="#{propuestaConvenioMB.referenteExterno}" rendered="#{propuestaConvenioMB.flagSearchEmailExterno}"
                                                        completeMethod="#{propuestaConvenioMB.methodSearchExterno}" disabled="#{propuestaConvenioMB.disableAutoExterno}"
                                                        var="theme" itemLabel="#{theme.emailPersona}" itemValue="#{theme}" converter="#{personaConverter}" 
                                                        forceSelection="true">                                           
                                            <p:column>
                                                <h:outputText value="#{theme.emailPersona}" />
                                            </p:column>
                                            <p:ajax event="itemSelect" listener="#{propuestaConvenioMB.cargarNombreSoliExterno()}" process="@this" update="GroupSolicitanteExterno"/>
                                        </p:autoComplete>
                                        <p:watermark for="idEmailExterno" value="E-mail"/> 
                                    </p:column>
                                </p:panelGrid>
                            </h:panelGroup>  
                            <h:panelGroup id="GroupSolicitanteExterno" >        
                                <p:panelGrid rendered="#{propuestaConvenioMB.tabAsisExterno}">                           

                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idSolicinateNombreExterno" value="Nombre Solicitante" />
                                        </p:column>
                                        <p:column>                                            

                                            <p:inputText id="idSolicinateNombreExterno" required="true" label="Nombre" value="#{propuestaConvenioMB.referenteExterno.nombrePersona}" />
                                            <p:message for="idSolicinateNombreExterno" />   
                                            <p:watermark for="idSolicinateNombreExterno" value="Nombre Solicitante"/>                                           

                                        </p:column>
                                        <p:column>
                                            <p:outputLabel for="idSolicinateApellidoExterno" value="Apellido Solicitante" />
                                        </p:column>
                                        <p:column>

                                            <p:inputText id="idSolicinateApellidoExterno" required="true"  label="Apellido" value="#{propuestaConvenioMB.referenteExterno.apellidoPersona}" />
                                            <p:message for="idSolicinateApellidoExterno" />   
                                            <p:watermark for="idSolicinateApellidoExterno" value="Apellido Solicitante"/>                                           

                                        </p:column>
                                    </p:row>   
                                    <p:row>

                                        <p:column>
                                            <p:outputLabel for="emailExterno" value="Correo Electr&oacute;nico" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="emailExterno" required="true" value="#{propuestaConvenioMB.referenteExterno.emailPersona}">
                                                <f:validator validatorId="com.sisrni.validator.emailValidator" />
                                            </p:inputText>
                                            <p:message for="emailExterno" display="tooltip" />  
                                            <p:watermark for="emailExterno" value="correo@email.com" id="waterCorreo" />
                                        </p:column> 
                                        <p:column>
                                            <p:outputLabel for="idDocumentoExterno" value="N&deg; Pasaporte/ID" />
                                        </p:column>
                                        <p:column>                                           
                                            <p:inputText id="idDocumentoExterno" required="true"  label="Pass/ID" value="#{propuestaConvenioMB.referenteExterno.pasaporte}" />                                    
                                            <p:watermark for="idDocumentoExterno" value="N&deg; Pasaporte/ID" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idTelefonoExterno" value="Tel: " />
                                        </p:column>
                                        <p:column>
                                            <p:inputMask id="idTelefonoExterno" required="true" mask="9999-9999" value="#{propuestaConvenioMB.telFijoExterno.numeroTelefono}" />
                                            <p:watermark for="idTelefonoExterno" value="xxxx-xxxx" id="waterTelEx" /> 
                                            <p:message for="idTelefonoExterno" />
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel for="idCelExterno" value="Cel" />
                                        </p:column>
                                        <p:column>
                                            <p:inputMask id="idCelExterno" required="true" mask="9999-9999" value="#{propuestaConvenioMB.telCelularExterno.numeroTelefono}" />
                                            <p:watermark for="idCelExterno" value="xxxx-xxxx" id="waterfaxEx" /> 
                                            <p:message for="idCelExterno" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idCargoExterno" value="Cargo" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="idCargoExterno" required="true"  label="cargo" value="#{propuestaConvenioMB.referenteExterno.cargoPersona}"/>
                                            <p:watermark for="idCargoExterno" value="Cargo" id="waterCargoEx" />
                                            <p:message for="idCargoExterno" />
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel for="idEntidadInstitucion" value="Entidad o Instituci&oacute;n"  />
                                        </p:column>
                                        <p:column>
                                            <p:selectOneMenu  id="idEntidadInstitucion" required="true" value="#{propuestaConvenioMB.referenteExterno.idOrganismo}" converter="#{organismoConverter}" style="width:160px" >                                              
                                                <f:selectItem itemValue="#{null}" itemLabel="Seleccione Facultad/Unidad" noSelectionOption="true" />                                            
                                                <f:selectItems value="#{propuestaConvenioMB.listadoOrganismo}" var="organi" itemLabel="#{organi.nombreOrganismo}" itemValue="#{organi}" />
                                            </p:selectOneMenu>
                                        </p:column>
                                    </p:row>


                                </p:panelGrid>   
                            </h:panelGroup>
                        </p:tab>
                        <p:tab title="Datos de Propuesta">
                            <h:panelGroup id="fileUploadGroup" >    
                                <p:panelGrid>                           
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idTipoPropuesta" value="Tipo de Propuesta" />
                                        </p:column>
                                        <p:column>
                                            <p:selectOneMenu id="idTipoPropuesta" required="true"  value="#{propuestaConvenioMB.propuestaConvenio.idTipoPropuestaConvenio}" converter="#{tipoPropuestaConvenioConverter}" effect="fade"  style="width:160px" >                                            
                                                <p:ajax  listener="#{propuestaConvenioMB.onTipoConvenioChange}" update="idConvenioPropuesta"  process="@this" />
                                                <f:selectItem itemValue="#{null}" itemLabel="Seleccione Tipo Propuesta" noSelectionOption="true" />                                            
                                                <f:selectItems value="#{propuestaConvenioMB.listadoTipoPrpouestaConvenio}" var="tipoPropCon" itemLabel="#{tipoPropCon.nombrePropuestaConvenio}" itemValue="#{tipoPropCon}" />       
                                            </p:selectOneMenu>
                                            <p:message for="idTipoPropuesta" />  
                                        </p:column>
                                    </p:row>
                                    <p:row>

                                        <p:column>
                                            <p:outputLabel  value="Convenio"  />
                                        </p:column>
                                        <p:column>
                                            <p:selectOneMenu disabled="#{propuestaConvenioMB.flagConvenioMarco}" id="idConvenioPropuesta" required="true" value="#{propuestaConvenioMB.propuestaConvenioTemp}" converter="#{propuestaConvenioConverter}"  style="width:160px" >                                              
                                                <f:selectItem itemValue="#{null}" itemLabel="Seleccione Convenio" noSelectionOption="true" />                                            
                                                <f:selectItems value="#{propuestaConvenioMB.listadoPropuestaConvenio}" var="pConve" itemLabel="#{pConve.nombrePropuesta}" itemValue="#{pConve}" />
                                            </p:selectOneMenu>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idNombrePropuesta" value="Nombre de Propuesta" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="idNombrePropuesta"  required="true" label="nombre propuesta" value="#{propuestaConvenioMB.propuestaConvenio.nombrePropuesta}"/>
                                            <p:message for="idNombrePropuesta" />
                                            <p:watermark for="idNombrePropuesta" value="Nombre Propuesta" id="nameProp" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idDescripcionPropuesta" value="Descripci&oacute;n" />
                                        </p:column>
                                        <p:column>
                                            <p:inputTextarea id="idDescripcionPropuesta" required="true" label="descripcion" maxlength="300" value="#{propuestaConvenioMB.propuestaConvenio.finalidadPropuesta}" rows="6" style="width: 300px;" />
                                            <p:message for="idDescripcionPropuesta" /> 
                                            <p:watermark for="idDescripcionPropuesta" value="Descripcion" id="descripcionProp" />
                                        </p:column>
                                    </p:row>
                                    <table style="width:80%" > 
                                        <tfoot>                                        
                                            <tr align="right"> 
                                                <td></td>
                                                <td></td>
                                                <td colspan="3"><p:commandButton rendered="#{!propuestaConvenioMB.flagEdicion}" actionListener="#{propuestaConvenioMB.guardarPropuestaConvenio}" process="formAdmin" update="formAdmin" value="Guardar"  id="btnGuardar" icon="ui-icon-disk" title="Guardar Propuesta Convenio" /></td>                                 
                                                <!--<td colspan="3"><p:commandButton rendered="#{!propuestaConvenioMB.flagEdicion}" actionListener="#{propuestaConvenioMB.FileRead()}" process="@this"  value="Test Mail"  id="ema" icon="ui-icon-disk" title="envio email" /></td>-->                                 
                                                <td colspan="3"><p:commandButton rendered="#{propuestaConvenioMB.flagEdicion}" actionListener="#{propuestaConvenioMB.actualizarPropuestaConvenio}" process="formAdmin" update="formAdmin" value="Actualizar"  id="btnActualizar" icon="fa fa-save" title="Actualizar Propuesta Convenio" /></td>                                 
                                                <td colspan="3"><p:commandButton  rendered="#{propuestaConvenioMB.flagEdicion}"  actionListener="#{propuestaConvenioMB.volver()}" process="formAdmin" update="formAdmin" value="Volver"  id="btnAtras" icon="ui-icon-disk" title="Volver Consulta Convenio" /></td>                                 
                                            </tr>
                                        </tfoot>
                                    </table>  
                                </p:panelGrid> 
                            </h:panelGroup>
                        </p:tab>
                    </p:accordionPanel>                                                                                               
                </p:panel>

            </center>    
        </h:form>   

        <script type="text/javascript">

            PrimeFaces.validator['custom.emailValidator'] = {
                pattern: /\S+@\S+/,
                validate: function (element, value) {
                    if (!this.pattern.test(value)) {
                        throw {
                            summary: 'Validation Error',
                            detail: value + ' is not a valid email.'
                        }
                    }
                }
            };

        </script>

    </ui:define>


</ui:composition>
