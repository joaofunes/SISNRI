<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition  template="/WEB-INF/templates/layout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions" 
    >
                    
    <ui:define name="content">
            <f:metadata>            
            <f:viewAction action="#{consultarEstadoConvenioMB.init}" />
        </f:metadata>   
            <h2 class="title ui-widget-header ui-corner-all" align="center">Consultar Estados de Convenios</h2>
            
            <h:form id="formAdmin">
                
                <p:dataTable var="convenio" value="#{consultarEstadoConvenioMB.listadoConvenio}" paginator="true" rows="5"                             
                             paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                             rowsPerPageTemplate="5,10,15" paginatorPosition="bottom"                       
                             >    
                    
                     <f:facet name="header">
                        Convenios
                     </f:facet>                    
                    <p:columnGroup type="header">
                        <p:row>
                            <p:column rowspan="4" headerText="Nombre Convenio" />
                            <p:column rowspan="4" headerText="Vigencia" />
                            <p:column rowspan="4" headerText="Cambio Estado" />
                            <p:column colspan="2" headerText="Estado Actual" />
                        </p:row>
                        <p:row>
                            <p:column colspan="1" headerText="Activo" />
                            <p:column colspan="1" headerText="Inactivo" />
                        </p:row>
                      
                    </p:columnGroup>
                    
                    <p:column>
                        <h:outputText value="#{convenio.nombre_propuesta}" />
                    </p:column>
                    <p:column>                       
                         <h:outputText value="#{convenio.vigencia}">                       
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                         </h:outputText>
                    </p:column>                    
                    <p:column>
                        <h:outputText value="#{convenio.fecha_cambio_estado}">                       
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                         </h:outputText>                        
                    </p:column>                    
                    <p:column style="width: 50%; margin: 0px auto;" headerText="Vigente">
                        <p:graphicImage style="display: block; margin: 0px auto;" value="#{convenio.vigencia.before(consultarEstadoConvenioMB.fechaActual)?'/img/animation/tiret.gif':'/img/animation/clock_v.gif'}" />                      
                    </p:column>
                    <p:column style="width: 50%; margin: 0px auto;" headerText="No Vigente">
                        <p:graphicImage style="display: block; margin: 0px auto;" value="#{convenio.vigencia.before(consultarEstadoConvenioMB.fechaActual)?'/img/animation/clock_v.gif':'/img/animation/tiret.gif'}" />                      
                    </p:column>
                 
                   
                </p:dataTable>
            </h:form> 
    </ui:define> 
      
</ui:composition>
