<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition  template="/WEB-INF/templates/layout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions" 
    >
                    
    <ui:define name="content">
            
        
            <h:form id="formAdminPersona">
                <center> 
                    <p:commandButton id="createButton" icon="ui-icon-plus"   value="Nueva Persona" process="@this"  oncomplete="PF('').show();"/>
                    <p:commandButton id="editButton" icon="ui-icon-plus"   value="Editar Persona" process="@this idDocumentoExterno" update=":formEditPersonas"  actionListener="#{propuestaConvenioMB.preEditarPropuestaExterno}"  />
                    <p:commandButton id="createButtonInterno" icon="ui-icon-plus"   value="Nueva Persona" process="@this"  oncomplete="PF('PersonaCreateDialog').show();"/>
                    <p:commandButton id="editButtonInterno" icon="ui-icon-plus"   value="Editar Persona" process="@this idDocumentoInterno" update=":formEditPersonas"  action="#{propuestaConvenioMB.preEditarPropuestaInterno}"/>
                                
       
                           <p:panel style="width: 100%" id="idpanelSolcitante" header="Datos del Solicitante" >  
                               <p:panelGrid >                           
                                   <p:row>
                                       <p:column>
                                          <p:outputLabel for="idSolicinateNombre" value="Nombre Solicitante" />
                                       </p:column>
                                  
                                        <p:column  colspan="3">
                                            <p:inputText id="idSolicinateNombre"  required="true" label="Nombre" value="#{propuestaConvenioMB.solicitante.nombrePersona}" style="width:450px"/>
                                            <p:message for="idSolicinateNombre" />   
                                            <p:watermark for="idSolicinateNombre" value="Nombre Solicitante" id="watermarkNameSol" />                                           
                                        </p:column>
                                   </p:row>                                                                       
                                   <p:row>
                                       <p:column>
                                           <p:outputLabel for="idSolicinateNombreAuto" value="Nombre Solicitante" />                                       
                                       </p:column>

                                       <p:column colspan="3">
                                           <p:autoComplete id="idSolicinateNombreAuto" value="#{propuestaConvenioMB.solicitante}" completeMethod="#{propuestaConvenioMB.completeSolicitante}" style="width:450px"
                                                           var="solicitud" itemLabel="#{solicitud.nombrePersona}" itemValue="#{solicitud}" converter="#{personaConverter}" scrollHeight="250">
                                               <p:ajax event="itemSelect" listener="#{propuestaConvenioMB.searchByNameSolicitante()}" process="@this,idSolicinateNombre" update="idFacultad,idUnidad,idCargo"/>
                                           </p:autoComplete> 
                                           <p:message for="idSolicinateNombreAuto" />  
                                           <p:watermark for="idSolicinateNombreAuto" value="Digite Nombre Solicitante" id="watermarkNameSol2" /> 
                                       </p:column>

                                   </p:row>                                                                      
                                   <p:row>
                                       <p:column>
                                           <p:outputLabel for="idFacultad" value="Facultad" />
                                       </p:column>
                                       <p:column>
                                           <p:inputText id="idFacultad"  required="true" label="Facultad" value="#{propuestaConvenioMB.solicitante.idUnidad.idFacultad.nombreFacultad}"/>
                                           <p:message for="idFacultad" />
                                           <p:watermark for="idFacultad" value="Facultad" id="watermarkFacultad" />
                                       </p:column>
                                       <p:column>
                                           <p:outputLabel for="idUnidad" value="Unidad" />
                                       </p:column>
                                       <p:column>
                                           <p:inputText id="idUnidad"  required="true" label="unidad" value="#{propuestaConvenioMB.solicitante.idUnidad.nombre}"/>
                                           <p:message for="idUnidad" />
                                           <p:watermark for="idUnidad" value="Unidad" id="watermarkUnion" />
                                       </p:column>
                                   </p:row>

                                   <p:row>
                                       <p:column>
                                           <p:outputLabel for="idCargo" value="Cargo Solicitante" />
                                       </p:column>
                                       <p:column>
                                            <p:inputText id="idCargo"  required="true" label="cargo" value="#{propuestaConvenioMB.solicitante.cargoPersona}"/>
                                            <p:message for="idCargo" />
                                            <p:watermark for="idCargo" value="Cargo" id="watermarkCargo" />
                                       </p:column>
                                       <p:column>
                                           
                                       </p:column>
                                       <p:column>
                                           
                                       </p:column>
                                   </p:row>   

                               </p:panelGrid>                               
                           </p:panel> 
                           
                    <p:panel id="idpanelRefInter" header="Datos Solicitante Interno" style="margin-bottom:20px">                          
                                
                                <p:panelGrid>                           
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idSolicinateNombreInterno" value="Nombre Solicitante" />
                                        </p:column>
                                        <p:column>
                                            <p:autoComplete id="idSolicinateNombreInterno" value="#{propuestaConvenioMB.referenteInterno}" completeMethod="#{propuestaConvenioMB.completeSolicitanteInterno}"
                                                            var="interno" itemLabel="#{interno.nombrePersona}" itemValue="#{interno}" converter="#{personaConverter}" scrollHeight="250">
                                                <p:ajax event="itemSelect" listener="#{propuestaConvenioMB.searchByNameInterno()}" process="@this,idSolicinateNombreInterno" update="idFacultadInterno,idUnidadInterno,formAdmin"/>
                                            </p:autoComplete> 
                                            <p:watermark for="idSolicinateNombreInterno" value="Ingrese Nombre Solicitante" id="solNomb2" />
                                            <p:message for="idSolicinateNombreInterno" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idDocumentoInterno" value="N&deg; Documento" />     
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="idDocumentoInterno"  required="true"  value="#{propuestaConvenioMB.numDocumentoInterno}"/>
                                            <p:message for="idDocumentoInterno" />
                                            <p:watermark for="idDocumentoInterno" value="N&deg; Documento" id="watermarkNDocumento" />  
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel for="email" value="Correo Electr&oacute;nico" />     
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="email"  required="true" value="#{propuestaConvenioMB.referenteInterno.emailPersona}">
                                                <f:validator validatorId="com.sisrni.validator.emailValidator" />
                                            </p:inputText>
                                            <p:message for="email" display="tooltip" />  
                                            <p:watermark for="email" value="correo@email.com" id="watermarkEmail" />
                                        </p:column>
                                        <p:column>
                                            <p:commandButton actionListener="#{propuestaConvenioMB.searchByDocEmailInterno}" process="@this idDocumentoInterno email" id="idBtnSearchInByEmail" icon="ui-icon-search" title="Buscar referente interno" />
                                        </p:column>

                                    </p:row>   
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idFacultadInterno" value="Facultad" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="idFacultadInterno"  required="true" readonly="true" label="Facultad" value="#{propuestaConvenioMB.referenteInterno.idUnidad.idFacultad.nombreFacultad}"/>
                                            <p:watermark for="idFacultadInterno" value="Facultad" id="watermarkFac" />
                                            <p:message for="idFacultadInterno" />
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel for="idUnidadInterno" value="Unidad" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="idUnidadInterno"  required="true" readonly="true" label="unidad" value="#{propuestaConvenioMB.referenteInterno.idUnidad.nombre}"/>
                                            <p:watermark for="idUnidadInterno" value="Unidad" id="watermarkuni" />
                                            <p:message for="idUnidadInterno" />
                                        </p:column>
                                    </p:row>   
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idCargoInterno" value="Cargo Solicitante" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="idCargoInterno"  required="true" label="cargo" readonly="true" value="#{propuestaConvenioMB.referenteInterno.cargoPersona}" />
                                            <p:watermark for="idCargoInterno" value="Cargo" id="waterCargo" />
                                            <p:message for="idCargoInterno" />
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel for="idTelefonoInterno" value="Tel&eacute;fono " />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="idTelefonoInterno" required="true" readonly="true" value="#{propuestaConvenioMB.telFijoInterno.numeroTelefono}"/>
                                            <p:watermark for="idTelefonoInterno" value="xxxx-xxxx" id="waterTelef" /> 
                                            <p:message for="idTelefonoInterno" />
                                        </p:column>
                                    </p:row>   
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idFaxInterno" value="Fax" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="idFaxInterno" required="true"  readonly="true" value="#{propuestaConvenioMB.faxInterno.numeroTelefono}"/> 
                                            <p:watermark for="idFaxInterno" value="xxxx-xxxx" id="waterfax" /> 
                                            <p:message for="idFaxInterno" />
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>        
                               
                         </p:panel> 
                        <p:panel  id="idpanelRefEx" header="Datos Solicitante Externo" style="margin-bottom:20px"> 

                                <p:panelGrid>                           
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idNombreExterno" value="Nombre" />
                                        </p:column>
                                        <p:column>
                                            <p:autoComplete id="idNombreExterno" value="#{propuestaConvenioMB.referenteExterno}" completeMethod="#{propuestaConvenioMB.completeSolicitanteExterno}"
                                                            var="externo" itemLabel="#{externo.nombrePersona}" itemValue="#{externo}" converter="#{personaConverter}" scrollHeight="250">
                                                <p:ajax event="itemSelect" listener="#{propuestaConvenioMB.searchByNameExterno()}" process="@this,idNombreExterno" update="formAdmin"/>
                                            </p:autoComplete>                                       
                                            <p:message for="idNombreExterno" />
                                            <p:watermark for="idNombreExterno" value="Ingrese Nombre Solicitante" id="idNombreExterno2" /> 
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idDocumentoExterno" value="N&deg; Documento" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="idDocumentoExterno"  required="true" label="c" value="#{propuestaConvenioMB.numDocumentoExterno}"/>
                                            <p:message for="idDocumentoExterno" />
                                            <p:watermark for="idDocumentoExterno" value="N&deg; Documento" id="waterNDoc" />
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel for="emailExterno" value="Correo Electr&oacute;nico" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="emailExterno" required="true" value="#{propuestaConvenioMB.referenteExterno.emailPersona}">
                                                <f:validator validatorId="com.sisrni.validator.emailValidator" />
                                            </p:inputText>
                                            <p:message for="emailExterno" display="tooltip" />  
                                            <p:watermark for="emailExterno" value="correo@email.com" id="waterCorreo" />
                                        </p:column>
                                        <p:column>
                                            <p:commandButton actionListener="#{propuestaConvenioMB.searchByDocEmailExterno}" process="@this idDocumentoExterno emailExterno" id="idBtnSearchExByEmail" icon="ui-icon-search" title="Buscar referente interno" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idCargoExterno" value="Cargo" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="idCargoExterno" readonly="true" label="cargo" value="#{propuestaConvenioMB.referenteExterno.cargoPersona}"/>
                                            <p:watermark for="idCargoExterno" value="Cargo" id="waterCargoEx" />
                                            <p:message for="idCargoExterno" />
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel for="idEntidadInstitucion" value="Entidad o Instituci&oacute;n" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="idEntidadInstitucion"  readonly="true" label="Entidad o institucion" value="#{propuestaConvenioMB.referenteExterno.idOrganismo.nombreOrganismo}"/>
                                            <p:watermark for="idEntidadInstitucion" value="Entidad o Institucion" id="waterentidad_inst" />
                                            <p:message for="idEntidadInstitucion" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="idTelefonoExterno" value="Tel&eacute;fono " />
                                        </p:column>
                                        <p:column>
                                            <p:inputMask id="idTelefonoExterno" readonly="true" mask="9999-9999" value="#{propuestaConvenioMB.telFijoExterno.numeroTelefono}" required="true"/>
                                            <p:watermark for="idTelefonoExterno" value="xxxx-xxxx" id="waterTelEx" /> 
                                            <p:message for="idTelefonoExterno" />
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel for="idFaxExterno" value="Fax" />
                                        </p:column>
                                        <p:column>
                                            <p:inputMask id="idFaxExterno" readonly="true" mask="(999) 999-9999" value="#{propuestaConvenioMB.faxExterno.numeroTelefono}" required="true"/>
                                            <p:watermark for="idFaxExterno" value="xxxx-xxxx" id="waterfaxEx" /> 
                                            <p:message for="idFaxExterno" />
                                        </p:column>
                                    </p:row>

                                </p:panelGrid>   


                            </p:panel>
                 
               
                </center>    
            </h:form>   
        
       
    </ui:define>
    
    
</ui:composition>
