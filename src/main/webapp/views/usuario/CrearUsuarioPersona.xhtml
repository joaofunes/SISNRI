<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html  template="/WEB-INF/templates/layout.xhtml"
       xmlns="http://www.w3.org/1999/xhtml"
       xmlns:f="http://java.sun.com/jsf/core"
       xmlns:h="http://java.sun.com/jsf/html"
       xmlns:ui="http://java.sun.com/jsf/facelets"
       xmlns:p="http://primefaces.org/ui"
       xmlns:pe="http://primefaces.org/ui/extensions">


    <ui:composition>
        <p:dialog id="PersonaCreateDlg" widgetVar="PersonaCreateDialog"  resizable="false"  modal="true" appendTo="@(body)" header="Creacion Persona" closeOnEscape="true">
            <p:ajax event="close"  oncomplete="myrefresh();"></p:ajax>  

            <h:form id="formNewPersona">
                <center> 
                    <h:panelGrid columns="2" >
                        <p:column>  
                            <p:outputLabel for="idNombrePersona" value="Nombre Persona" />
                        </p:column>                                         
                        <p:column>                                                                                                                                                                                             
                            <p:inputText id="idNombrePersona"  required="true" label="Nombre" value="#{personaMB.persona.nombrePersona}"/>
                            <p:watermark for="idNombrePersona" value="Nombre de la Persona" id="watermarkNombre" />
                            <p:message for="idNombrePersona" />                                       
                        </p:column>

                        <p:column>  
                            <p:outputLabel for="idApellido" value="Apellido Persona" />
                        </p:column>                                         
                        <p:column> 
                            <p:inputText id="idApellido"  required="true" label="Apellido" value="#{personaMB.persona.apellidoPersona}"/>
                            <p:watermark for="idApellido" value="Apellido de la Persona" id="watermarkApeliido" />
                            <p:message for="idApellido" />
                        </p:column>

                        <p:column> 
                            <p:outputLabel for="dui" value="DUI" />
                        </p:column> 
                        <p:column> 
                            <p:inputMask id="dui" value="#{personaMB.persona.duiPersona}" mask="99999999-9"/>
                            <p:watermark for="dui" value="99999999-9" id="watermarkDui" />
                            <p:message for="dui" /> 
                        </p:column> 

                        <p:column>  
                            <p:outputLabel for="email" value="Correo Electr&oacute;nico" />
                        </p:column>      
                        <p:column> 
                            <p:inputText id="email" required="true" value="#{personaMB.persona.emailPersona}">
                                <f:validator validatorId="com.sisrni.validator.emailValidator" />
                            </p:inputText>
                            <p:watermark for="email" value="email@email.com" id="watermarkEmail" />
                            <p:message for="email" display="tooltip" />                                         
                        </p:column>    

                        <p:column>  
                            <p:outputLabel for="idTelefonoCellEx" value="Tel&eacute;no Celular" />
                        </p:column>                                         
                        <p:column> 
                            <p:inputMask id="idTelefonoCellEx" value="#{personaMB.telefonoFijo.numeroTelefono}" mask="9999-9999"/>
                            <p:watermark for="idTelefonoCellEx" value="9999-9999"  />                                                       
                        </p:column>                               
                        <p:column>  
                            <p:outputLabel for="idTelefonoFijoEx" value="Tel&eacute;no Fijo" />
                        </p:column>                                         
                        <p:column> 
                            <p:inputMask id="idTelefonoFijoEx" value="#{personaMB.telefonoCell.numeroTelefono}" mask="9999-9999"/>
                            <p:watermark for="idTelefonoFijoEx" value="9999-9999"  />                                                       
                        </p:column>                               
                        
                         <p:column>
                            <p:outputLabel for="idCargo" value="Cargo" />
                        </p:column>                                         
                        <p:column> 
                            <p:inputText id="idCargo"  required="true" label="cargo" value="#{personaMB.persona.cargoPersona}"/>
                            <p:watermark for="idCargo" value="Cargo" id="watermarkCargo" />
                            <p:message for="idCargo" />
                        </p:column> 
                        
                        <p:column>  
                            <p:outputLabel for="idUnidads" value="Unidad" />
                        </p:column>                                         
                        <p:column>                                         
                            <p:selectOneMenu id="idUnidads" panelStyle="width:160px" style="width:160px" value="#{personaMB.persona.idUnidad}" effect="fade" converter="#{unidadConverter}" required="true">                                           
                                <f:selectItem itemLabel="Unidad" itemValue="null" noSelectionOption="true" />  
                                <f:selectItems value="#{personaMB.listadoUnidad}" var="unidad" itemLabel="#{unidad.nombreUnidad}" itemValue="#{unidad}"/>  
                            </p:selectOneMenu>    
                        </p:column>
                        <p:column>  
                            <p:outputLabel for="idOrganismo" value="Organismo" />
                        </p:column>                                         
                        <p:column>                                         
                            <p:selectOneMenu id="idOrganismo"  panelStyle="width:160px" style="width:160px" value="#{personaMB.persona.idOrganismo}"  effect="fade" converter="#{organismoConverter}" required="true">                                           
                                <f:selectItem itemLabel="Organismo" itemValue="null" noSelectionOption="true" />  
                                <f:selectItems value="#{personaMB.listadoOrganismo}" var="organismo" itemLabel="#{organismo.nombreOrganismo}" itemValue="#{organismo}"/>  
                            </p:selectOneMenu>                                                                               
                        </p:column>
                        
                                 <p:outputLabel value="Codigo" for="codigoUsuario" />
                                <p:inputText id="codigoUsuario" value="#{usuarioMB.selected.codigoUsuario}" title="#{myBundle.CreateSsUsuariosTitle_codigoUsuario}"/>

                                <p:outputLabel value="Nombre Usuario" for="nombreUsuario" />
                                <p:inputText id="nombreUsuario" value="#{usuarioMB.selected.nombreUsuario}" title="#{myBundle.CreateSsUsuariosTitle_nombreUsuario}"/>                               

                                <p:outputLabel value="Cargo" for="cargo" />
                                <p:inputText id="cargo" value="#{usuarioMB.selected.cargo}" title="#{myBundle.CreateSsUsuariosTitle_cargo}"/>

                                <p:outputLabel value="Descripcion" for="descripcion" />
                                <p:inputText id="descripcion" value="#{usuarioMB.selected.descripcion}" title="#{myBundle.CreateSsUsuariosTitle_descripcion}"/>

                                <p:outputLabel value="Bloqueado" for="bloqueado" />
<!--                                <p:inputText id="bloqueado" value="#{usuarioMB.selected.bloqueado}" title="#{myBundle.CreateSsUsuariosTitle_bloqueado}"/>-->
                                 <p:selectOneMenu id="bloqueado" value="#{usuarioMB.selected.bloqueado}"  style="width: 100%" required="true" >
                                <f:selectItem itemLabel="--Seleccione--" itemValue="#{null}" noSelectionOption="true"/>
                                <f:selectItem itemLabel="SÃ­" itemValue="S" />
                                <f:selectItem itemLabel="No" itemValue="N" />
                                </p:selectOneMenu>                            
                               
                                 <p:outputLabel value="Clave" for="clave" />
                                 <p:password id="clave" value="#{usuarioMB.selected.clave}" match="Rclave" feedback="true" inline="true" /> 
                                 
                                 <p:outputLabel value="Repetir Clave" for="Rclave" />
                                 <p:password id="Rclave" value="#{usuarioMB.selected.clave}" inline="true" />   

                        <p:column> 
                            <p:commandButton value="Guardar Persona" id="idGuardarPersona" actionListener="#{personaMB.guardar()}" process="@form" update="@form" icon="ui-icon-disk" oncomplete="PF('PersonaCreateDialog').close();" />
                            <p:commandButton value="Cerrar" id="idCerrar" process="@this" icon="ui-icon-disk" immediate="true" onclick="PF('PersonaCreateDialog').close();" />
                        </p:column>


                    </h:panelGrid>

                </center>    
            </h:form>  

        </p:dialog>

        <script type="text/javascript">
            /**
             * Faces Validator
             */
            PrimeFaces.validator['custom.emailValidator'] = {
                pattern: /\S+@\S+/,
                validate: function (element, value) {
                    //use element.data() to access validation metadata, in this case there is none.
                    if (!this.pattern.test(value)) {
                        throw {
                            summary: 'Validation Error',
                            detail: value + ' is not a valid email.'
                        }
                    }
                }
            };
        </script>




    </ui:composition>
</html>