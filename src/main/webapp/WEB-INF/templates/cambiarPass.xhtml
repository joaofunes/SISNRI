<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <p:dialog id="RecuperarPassDlg" widgetVar="RecuperarPassDialog" modal="true" resizable="false" appendTo="@(body)"  header="Cambiar Contrase&ntilde;a" >
                        
            <h:form id="RecuperarPassForm">

                <h:panelGroup id="display">
                 <p:panelGrid columns="2" columnClasses="column">
                         <p:outputLabel value="Clave Antigua: " for="antigua" />
                         <p:password id="antigua" value="#{usuarioMB.clave}" inline="true" /> 
                 
                         <p:outputLabel value="Clave Nueva: " for="clave" />
                         <p:password id="clave" value="#{usuarioMB.clave2}" match="Rclave" feedback="true" inline="true" /> 
                             
                         <p:outputLabel value="Repetir Clave Nueva: " for="Rclave"  />
                         <p:password id="Rclave" value="#{usuarioMB.clave2}" inline="true" />
                   </p:panelGrid> 
                  <h:panelGrid >
          
                    </h:panelGrid>
                    <p:column>
                        <p:commandButton value="Cambiar Clave" id="idRecuperarPass" actionListener="#{usuarioMB.cambiarPass()}" process="@form" update="@form" icon="ui-icon-disk"/>
                 
                    <p:commandButton value="Cancelar" id="idCerrar" process="@this" icon="ui-icon-cancel" immediate="true" onclick="PF('RecuperarPassDialog').close();" />
                    </p:column>
                </h:panelGroup>

            </h:form>

        </p:dialog>
        
          <script type="text/javascript">
            /**
             * Faces Validator
             */
            PrimeFaces.validator['custom.emailValidator'] = {
                pattern: /\S+@\S+/,
                validate: function (element, value) {
                    //use element.data() to access validation metadata, in this case there is none.
                    if (!this.pattern.test(value)) {
                        throw {
                            summary: 'Validation Error',
                            detail: value + ' is not a valid email.'
                        }
                    }
                }
            };
        </script>

    </ui:composition>

</html>
